<div class="row">
  <div id="{{entry.key}}" class="col-sm-10">
    <!-- Title -->
    <div class="title">{{ entry.title }}</div>

    <!-- Author -->
    <div class="author">
      {% assign author_array_size = entry.author_array | size %}
      {% assign author_array_limit = site.max_author_limit | default: author_array_size %}

      {%- for author in entry.author_array limit: author_array_limit -%}
        {% comment %} {% assign author_is_self = (site.scholar.last_name == author.last and site.scholar.first_name == author.first) %} {% endcomment %}
        {% assign clean_last_name = author.last | downcase | remove_accents %}
        {% assign coauthor_url = site.data.coauthors[clean_last_name] | where: 'firstname', author.first | first | default: null %}
        {% assign author_full_name = author.first | append: ' ' | append: author.last %}

        {%- if forloop.first == false %}, {% endif %}
        {%- if forloop.last and author_array_limit == author_array_size %}and {% endif %}

        {%- if author.first == 'Jeeho' and author.last == 'Ryoo' -%}
          <em style="border-bottom: 1px solid;">
            {{- author.first }}
            {{ author.last -}}
          </em>
        {%- elsif coauthor_url -%}
          <a href="{{ coauthor_url }}">
            {{- author.first }}
            {{ author.last -}}
          </a>
        {%- else -%}
          {{ author.first }}
          {{ author.last }}
        {%- endif -%}
      {% endfor %}

      {%- if author_array_size > author_array_limit -%}
        , and
        <span
          class="more-authors"
          title="click to view {{ author_array_size | minus: author_array_limit }} more author{{ author_array_size | minus: author_array_limit | pluralize }}"
          onclick="
            var element = $(this);
            element.attr('title', '');
            var more_authors_text = element.text() == '{{ author_array_size | minus: author_array_limit }} more author{{ author_array_size | minus: author_array_limit | pluralize }}' ? '{{ entry.author_array | slice: author_array_limit, author_array_size | map: 'first' | join: ', ' }}' : '{{ author_array_size | minus: author_array_limit }} more author{{ author_array_size | minus: author_array_limit | pluralize }}';
            element.text(more_authors_text);
          "
        >
          {{ author_array_size | minus: author_array_limit }} more author{{ author_array_size | minus: author_array_limit | pluralize }}
        </span>
      {% endif %}
    </div>

    <!-- Journal/Book title and date -->
    {% assign entrytype = '' %}
    {% if entry.type == 'article' %}
      {% capture entrytype %}<em>{{ entry.journal }}</em>{% endcapture %}
    {% elsif entry.type == 'inproceedings' or entry.type == 'incollection' %}
      {% capture entrytype %}<em>In {{ entry.booktitle }}</em>{% endcapture %}
    {% elsif entry.type == 'thesis' or entry.type == 'mastersthesis' or entry.type == 'phdthesis' %}
      {% capture entrytype %}<em>{{ entry.school }}</em>{% endcapture %}
    {% endif %}

    {% assign entrydate = '' %}
    {% if entry.month %}
      {% capture entrydate %}{{ entry.month | date: "%B" | capitalize }}{% endcapture %}
    {% endif %}

    {% if entry.month and entry.type == 'article' %}
      {% capture entrydate %}, {{ entry.month | date: "%B" | capitalize }}{% endcapture %}
    {% endif %}

    {% if entry.year %}
      {% capture entrydate %}{{ entrydate }} {{ entry.year }}{% endcapture %}
    {% endif %}
    {% if entry.location %}
      {% capture entrytype %}{{ entrytype }}, {{ entry.location }}{% endcapture %}
    {% endif %}
    {% if entry.location and entry.month %}
      {% capture entrytype %}{{ entrytype }}, {{ entrydate }}{% endcapture %}
    {% elsif entrydate %}
      {% capture entrytype %}{{ entrytype }}{{ entrydate }}{% endcapture %}
    {% endif %}
    {% if entry.additional_info %}
      {% capture entrytype %}{{ entrytype }}{{ entry.additional_info | markdownify | strip_html | strip }}{% endcapture %}
    {% endif %}

    <div class="periodical">
      {{ entrytype }}
    </div>
    <div class="periodical">
      {{ entry.note | strip }}
    </div>

    <!-- Links/Buttons -->
    <div class="links">
      {% if entry.award %}
        <a class="award btn btn-sm z-depth-0" role="button">{{ entry.award_name | default: 'Awarded' }}</a>
      {% endif %}
      {% if entry.abstract %}
        <a class="abstract btn btn-sm z-depth-0" role="button">Abs</a>
      {% endif %}
      {% if entry.arxiv %}
        <a href="http://arxiv.org/abs/{{ entry.arxiv }}" class="btn btn-sm z-depth-0" role="button">arXiv</a>
      {% endif %}
      {% if entry.bibtex_show %}
        <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a>
      {% endif %}
      {% if entry.html %}
        <a href="{{ entry.html | relative_url }}" class="btn btn-sm z-depth-0" role="button">HTML</a>
      {% endif %}
      {% if entry.pdf %}
        <a href="{{ entry.pdf | relative_url }}" class="btn btn-sm z-depth-0" role="button">PDF</a>
        {% comment %} <a href="{{ entry.html | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">PDF</a> {% endcomment %}
      {% endif %}
      {% if entry.supp %}
        <a href="{{ entry.supp | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Supp</a>
      {% endif %}
      {% if entry.video %}
        <a href="{{ entry.video }}" class="btn btn-sm z-depth-0" role="button">Video</a>
      {% endif %}
      {% if entry.blog %}
        <a href="{{ entry.blog }}" class="btn btn-sm z-depth-0" role="button">Blog</a>
      {% endif %}
      {% if entry.code %}
        <a href="{{ entry.code }}" class="btn btn-sm z-depth-0" role="button">Code</a>
      {% endif %}
      {% if entry.poster %}
        <a href="{{ entry.poster | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Poster</a>
      {% endif %}
      {% if entry.slides %}
        <a href="{{ entry.slides | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Slides</a>
      {% endif %}
      {% if entry.website %}
        <a href="{{ entry.website }}" class="btn btn-sm z-depth-0" role="button">Website</a>
      {% endif %}
    </div>

    <!-- Optional badges -->
    {% if site.enable_publication_badges %}
      {% assign entry_has_badge = entry.altmetric or entry.doi or entry.eprint or entry.pmid or entry.isbn or entry.dimensions or entry.google_scholar_id %}
      {% if entry_has_badge %}
        <div class="badges">
          {% if site.enable_publication_badges.altmetric and entry.altmetric %}
            <span
              class="altmetric-embed"
              data-hide-no-mentions="true"
              data-hide-less-than="15"
              data-badge-type="2"
              data-badge-popover="right"
              data-altmetric-id="{{ entry.altmetric }}"
            ></span>
          {% endif %}
          {% if site.enable_publication_badges.dimensions and entry.dimensions %}
            <span
              class="__dimensions_badge_embed__"
              data-id="{{ entry.dimensions }}"
              data-hide-zero-citations="true"
              data-style="small_rectangle"
              data-legend="hover-right"
              style="margin-bottom: 3px;"
            ></span>
          {% endif %}
          {% if site.enable_publication_badges.google_scholar and entry.google_scholar_id %}
            <a
              href="https://scholar.google.com/citations?view_op=view_citation&hl=en&user={{ site.scholar_userid }}&citation_for_view={{ site.scholar_userid }}:{{ entry.google_scholar_id }}"
              aria-label="Google Scholar link"
              role="button"
            >
              <img
                src="https://img.shields.io/badge/scholar-{% google_scholar_citations site.scholar_userid entry.google_scholar_id %}-4285F4?logo=googlescholar&labelColor=beige"
                alt="{% google_scholar_citations site.scholar_userid entry.google_scholar_id %} Google Scholar citations"
              >
            </a>
          {% endif %}
        </div>
      {% endif %}
    {% endif %}

    <!-- Hidden blocks for award, abstract, bibtex, video -->
    {% if entry.award %}
      <div class="award hidden d-print-inline">
        <p>{{ entry.award | markdownify }}</p>
      </div>
    {% endif %}
    {% if entry.abstract %}
      <div class="abstract hidden">
        <p>{{ entry.abstract }}</p>
      </div>
    {% endif %}
    {% if entry.bibtex_show %}
      <div class="bibtex hidden">
        {% highlight bibtex %}
        {{ entry.bibtex | hideCustomBibtex }}
        {% endhighlight %}
      </div>
    {% endif %}
    {% if entry.video %}
      <div class="abstract hidden">
        <div style="text-align: center;">{% include video.liquid path=entry.video class="img-fluid rounded z-depth-1" controls=true %}</div>
      </div>
    {% endif %}
  </div>
</div>
